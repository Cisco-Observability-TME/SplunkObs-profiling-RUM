var SplunkSessionRecorder=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}"function"==typeof SuppressedError&&SuppressedError;var t="object"===("undefined"==typeof globalThis?"undefined":e(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":e(self))?self:"object"===("undefined"==typeof window?"undefined":e(window))?window:"object"===("undefined"==typeof global?"undefined":e(global))?global:{},n="1.9.0",r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var o=function(e){var t=new Set([e]),n=new Set,o=e.match(r);if(!o)return function(){return!1};var a=+o[1],i=+o[2],s=+o[3];if(null!=o[4])return function(t){return t===e};function u(e){return n.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var o=e.match(r);if(!o)return u(e);var c=+o[1],f=+o[2],d=+o[3];return null!=o[4]||a!==c?u(e):0===a?i===f&&s<=d?l(e):u(e):i<=f?l(e):u(e)}}(n),a=n.split(".")[0],i=Symbol.for("opentelemetry.js.api."+a),s=t;function u(e,t,r,o){var a;void 0===o&&(o=!1);var u=s[i]=null!==(a=s[i])&&void 0!==a?a:{version:n};if(!o&&u[e]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(l.stack||l.message),!1}if(u.version!==n){l=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+e+" does not match previously registered API v"+n);return r.error(l.stack||l.message),!1}return u[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+n+"."),!0}function l(e){var t,n,r=null===(t=s[i])||void 0===t?void 0:t.version;if(r&&o(r))return null===(n=s[i])||void 0===n?void 0:n[e]}function c(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+n+".");var r=s[i];r&&delete r[e]}var f,d=window&&window.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},p=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v("verbose",this._namespace,e)},e}();function v(e,t,n){var r=l("diag");if(r)return n.unshift(t),r[e].apply(r,p([],d(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(f||(f={}));var m=window&&window.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},y=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},g=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=l("diag");if(r)return r[e].apply(r,y([],m(t),!1))}}var t=this;t.setLogger=function(e,n){var r,o,a;if(void 0===n&&(n={logLevel:f.INFO}),e===t){var i=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=i.stack)&&void 0!==r?r:i.message),!1}"number"==typeof n&&(n={logLevel:n});var s=l("diag"),c=function(e,t){function n(n,r){var o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<f.NONE?e=f.NONE:e>f.ALL&&(e=f.ALL),t=t||{},{error:n("error",f.ERROR),warn:n("warn",f.WARN),info:n("info",f.INFO),debug:n("debug",f.DEBUG),verbose:n("verbose",f.VERBOSE)}}(null!==(o=n.logLevel)&&void 0!==o?o:f.INFO,e);if(s&&!n.suppressOverrideMessage){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+d),c.warn("Current logger will overwrite one already registered from "+d)}return u("diag",c,t,!0)},t.disable=function(){c("diag",t)},t.createComponentLogger=function(e){return new h(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function b(e){return Symbol.for(e)}var S,w=function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},C=new w,k=window&&window.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},I=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},x=function(){function e(){}return e.prototype.active=function(){return C},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return t.call.apply(t,I([n],k(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),T=window&&window.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},M=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},E="context",O=new x,_=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return u(E,e,g.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return(r=this._getContextManager()).with.apply(r,M([e,t,n],T(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return l(E)||O},e.prototype.disable=function(){this._getContextManager().disable(),c(E,g.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(S||(S={}));var R="0000000000000000",N="00000000000000000000000000000000",L={traceId:N,spanId:R,traceFlags:S.NONE},D=function(){function e(e){void 0===e&&(e=L),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),A=b("OpenTelemetry Context Key SPAN");function F(e){return e.getValue(A)||void 0}function P(){return F(_.getInstance().active())}function j(e,t){return e.setValue(A,t)}function U(e){return e.deleteValue(A)}function W(e,t){return j(e,new D(t))}function z(e){var t;return null===(t=F(e))||void 0===t?void 0:t.spanContext()}var V=/^([0-9a-f]{32})$/i,G=/^[0-9a-f]{16}$/i;function B(e){return n=e.traceId,V.test(n)&&n!==N&&(t=e.spanId,G.test(t)&&t!==R);var t,n}function H(e){return new D(e)}var q=_.getInstance(),X=function(){function t(){}return t.prototype.startSpan=function(t,n,r){if(void 0===r&&(r=q.active()),Boolean(null==n?void 0:n.root))return new D;var o,a=r&&z(r);return"object"===e(o=a)&&"string"==typeof o.spanId&&"string"==typeof o.traceId&&"number"==typeof o.traceFlags&&B(a)?new D(a):new D},t.prototype.startActiveSpan=function(e,t,n,r){var o,a,i;if(!(arguments.length<2)){2===arguments.length?i=t:3===arguments.length?(o=t,i=n):(o=t,a=n,i=r);var s=null!=a?a:q.active(),u=this.startSpan(e,o,s),l=j(s,u);return q.with(l,i,void 0,u)}},t}();var K,Y=new X,$=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Y},e}(),J=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new X},e}()),Z=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!==(r=this.getDelegateTracer(e,t,n))&&void 0!==r?r:new $(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:J},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}(),Q=_.getInstance(),ee="trace",te=function(){function e(){this._proxyTracerProvider=new Z,this.wrapSpanContext=H,this.isSpanContextValid=B,this.deleteSpan=U,this.getSpan=F,this.getActiveSpan=P,this.getSpanContext=z,this.setSpan=j,this.setSpanContext=W}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=u(ee,this._proxyTracerProvider,g.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return l(ee)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){c(ee,g.instance()),this._proxyTracerProvider=new Z},e}().getInstance(),ne=function(){return ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ne.apply(this,arguments)};function re(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function oe(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function ae(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function ie(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}function se(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,a=e.maskInputFn,i=o||"";return(t[n.toLowerCase()]||t[r])&&(i=a?a(i):"*".repeat(i.length)),i}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(K||(K={}));var ue="__rrweb_original__";var le,ce,fe=1,de=new RegExp("[^a-z0-9-_:]"),pe=-2;function he(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(ve).join(""):null}catch(e){return null}}function ve(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=he(e.styleSheet)||t}catch(e){}return t}var me=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ye=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,ge=/^(data:)([^,]*),(.*)/i;function be(e,t){return(e||"").replace(me,(function(e,n,r,o,a,i){var s,u=r||a||i,l=n||o||"";if(!u)return e;if(!ye.test(u))return"url("+l+u+l+")";if(ge.test(u))return"url("+l+u+l+")";if("/"===u[0])return"url("+l+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+u)+l+")";var c=t.split("/"),f=u.split("/");c.pop();for(var d=0,p=f;d<p.length;d++){var h=p[d];"."!==h&&(".."===h?c.pop():c.push(h))}return"url("+l+c.join("/")+l+")"}))}var Se,we,Ce,ke,Ie,xe,Te=/^[^ \t\n\r\u000c]+/,Me=/^[, \t\n\r\u000c]+/;function Ee(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function Oe(){var e=document.createElement("a");return e.href="",e.href}function _e(e,t,n,r){return"src"===n||"href"===n&&r||"xlink:href"===n&&r&&"#"!==r[0]?Ee(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(Me),!(n>=t.length);){var a=r(Te);if(","===a.slice(-1))a=Ee(e,a.substring(0,a.length-1)),o.push(a);else{var i="";a=Ee(e,a);for(var s=!1;;){var u=t.charAt(n);if(""===u){o.push((a+i).trim());break}if(s)")"===u&&(s=!1);else{if(","===u){n+=1,o.push((a+i).trim());break}"("===u&&(s=!0)}i+=u,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?be(r,Oe()):"object"===t&&"data"===n&&r?Ee(e,r):r:Ee(e,r)}function Re(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var o=e.classList[r];if(t.test(o))return!0}return!(!n||!e.matches(n))||Re(e.parentNode,t,n)}return e.nodeType,e.TEXT_NODE,Re(e.parentNode,t,n)}function Ne(e,t){var n,r,o,a,i=t.doc,s=t.blockClass,u=t.blockSelector,l=t.maskTextClass,c=t.maskTextSelector,f=t.inlineStylesheet,d=t.maskInputOptions,p=void 0===d?{}:d,h=t.maskTextFn,v=t.maskInputFn,m=t.dataURLOptions,y=void 0===m?{}:m,g=t.inlineImages,b=t.recordCanvas,S=t.keepIframeSrcFn;if(i.__sn){var w=i.__sn.id;r=1===w?void 0:w}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:K.Document,childNodes:[],compatMode:e.compatMode,rootId:r}:{type:K.Document,childNodes:[],rootId:r};case e.DOCUMENT_TYPE_NODE:return{type:K.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:r};case e.ELEMENT_NODE:for(var C=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(e,s,u),k=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return de.test(t)?"div":t}(e),I={},x=0,T=Array.from(e.attributes);x<T.length;x++){var M=T[x],E=M.name,O=M.value;I[E]=_e(i,k,E,O)}if("link"===k&&f){var _=Array.from(i.styleSheets).find((function(t){return t.href===e.href})),R=null;_&&(R=he(_)),R&&(delete I.rel,delete I.href,I._cssText=be(R,_.href))}if("style"===k&&e.sheet&&!(e.innerText||e.textContent||"").trim().length)(R=he(e.sheet))&&(I._cssText=be(R,Oe()));if("input"===k||"textarea"===k||"select"===k){O=e.value;"radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&O?I.value=se({type:I.type,tagName:k,value:O,maskInputOptions:p,maskInputFn:v}):e.checked&&(I.checked=e.checked)}if("option"===k&&(e.selected&&!p.select?I.selected=!0:delete I.selected),"canvas"===k&&b)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,a=ue in o?o[ue]:o;if(new Uint32Array(a.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(y.type,y.quality));else if(!("__context"in e)){var N=e.toDataURL(y.type,y.quality),L=document.createElement("canvas");L.width=e.width,L.height=e.height,N!==L.toDataURL(y.type,y.quality)&&(I.rr_dataURL=N)}if("img"===k&&g){le||(le=i.createElement("canvas"),ce=le.getContext("2d"));var D=e,A=D.crossOrigin;D.crossOrigin="anonymous";var F=function(){try{le.width=D.naturalWidth,le.height=D.naturalHeight,ce.drawImage(D,0,0),I.rr_dataURL=le.toDataURL(y.type,y.quality)}catch(e){console.warn("Cannot inline img src="+D.currentSrc+"! Error: "+e)}A?I.crossOrigin=A:delete I.crossOrigin};D.complete&&0!==D.naturalWidth?F():D.onload=F}if("audio"!==k&&"video"!==k||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop),C){var P=e.getBoundingClientRect(),j=P.width,U=P.height;I={class:I.class,rr_width:j+"px",rr_height:U+"px"}}return"iframe"!==k||S(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src),{type:K.Element,tagName:k,attributes:I,childNodes:[],isSVG:(a=e,Boolean("svg"===a.tagName||a.ownerSVGElement)||void 0),needBlock:C,rootId:r};case e.TEXT_NODE:var W=e.parentNode&&e.parentNode.tagName,z=e.textContent,V="STYLE"===W||void 0,G="SCRIPT"===W||void 0;if(V&&z){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(z=(o=e.parentNode.sheet).cssRules?Array.from(o.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}z=be(z,Oe())}return G&&(z="SCRIPT_PLACEHOLDER"),!V&&!G&&Re(e,l,c)&&z&&(z=h?h(z):z.replace(/[\S]/g,"*")),{type:K.Text,textContent:z||"",isStyle:V,rootId:r};case e.CDATA_SECTION_NODE:return{type:K.CDATA,textContent:"",rootId:r};case e.COMMENT_NODE:return{type:K.Comment,textContent:e.textContent||"",rootId:r};default:return!1}}function Le(e){return void 0===e?"":e.toLowerCase()}function De(e,t){var n,r=t.doc,o=t.map,a=t.blockClass,i=t.blockSelector,s=t.maskTextClass,u=t.maskTextSelector,l=t.skipChild,c=void 0!==l&&l,f=t.inlineStylesheet,d=void 0===f||f,p=t.maskInputOptions,h=void 0===p?{}:p,v=t.maskTextFn,m=t.maskInputFn,y=t.slimDOMOptions,g=t.dataURLOptions,b=void 0===g?{}:g,S=t.inlineImages,w=void 0!==S&&S,C=t.recordCanvas,k=void 0!==C&&C,I=t.onSerialize,x=t.onIframeLoad,T=t.iframeLoadTimeout,M=void 0===T?5e3:T,E=t.keepIframeSrcFn,O=void 0===E?function(){return!1}:E,_=t.preserveWhiteSpace,R=void 0===_||_,N=Ne(e,{doc:r,blockClass:a,blockSelector:i,maskTextClass:s,maskTextSelector:u,inlineStylesheet:d,maskInputOptions:h,maskTextFn:v,maskInputFn:m,dataURLOptions:b,inlineImages:w,recordCanvas:k,keepIframeSrcFn:O});if(!N)return console.warn(e,"not serialized"),null;n="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===K.Comment)return!0;if(e.type===K.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Le(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Le(e.attributes.name)||"icon"===Le(e.attributes.rel)||"apple-touch-icon"===Le(e.attributes.rel)||"shortcut icon"===Le(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Le(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Le(e.attributes.property).match(/^(og|twitter|fb):/)||Le(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Le(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Le(e.attributes.name)||"googlebot"===Le(e.attributes.name)||"bingbot"===Le(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Le(e.attributes.name)||"generator"===Le(e.attributes.name)||"framework"===Le(e.attributes.name)||"publisher"===Le(e.attributes.name)||"progid"===Le(e.attributes.name)||Le(e.attributes.property).match(/^article:/)||Le(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Le(e.attributes.name)||"yandex-verification"===Le(e.attributes.name)||"csrf-token"===Le(e.attributes.name)||"p:domain_verify"===Le(e.attributes.name)||"verify-v1"===Le(e.attributes.name)||"verification"===Le(e.attributes.name)||"shopify-checkout-api-token"===Le(e.attributes.name)))return!0}}return!1}(N,y)&&(R||N.type!==K.Text||N.isStyle||N.textContent.replace(/^\s+|\s+$/gm,"").length)?fe++:pe;var L=Object.assign(N,{id:n});if(e.__sn=L,n===pe)return null;o[n]=e,I&&I(e);var D=!c;if(L.type===K.Element&&(D=D&&!L.needBlock,delete L.needBlock,e.shadowRoot&&(L.isShadowHost=!0)),(L.type===K.Document||L.type===K.Element)&&D){y.headWhitespace&&N.type===K.Element&&"head"===N.tagName&&(R=!1);for(var A={doc:r,map:o,blockClass:a,blockSelector:i,maskTextClass:s,maskTextSelector:u,skipChild:c,inlineStylesheet:d,maskInputOptions:h,maskTextFn:v,maskInputFn:m,slimDOMOptions:y,dataURLOptions:b,inlineImages:w,recordCanvas:k,preserveWhiteSpace:R,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:M,keepIframeSrcFn:O},F=0,P=Array.from(e.childNodes);F<P.length;F++){(W=De(P[F],A))&&L.childNodes.push(W)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var j=0,U=Array.from(e.shadowRoot.childNodes);j<U.length;j++){var W;(W=De(U[j],A))&&(W.isShadow=!0,L.childNodes.push(W))}}return e.parentNode&&ie(e.parentNode)&&(L.isShadow=!0),L.type===K.Element&&"iframe"===L.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var i="about:blank";r.location.href===i&&e.src!==i&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){a||(t(),a=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),a=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&x){var n=De(t,{doc:t,map:o,blockClass:a,blockSelector:i,maskTextClass:s,maskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:v,maskInputFn:m,slimDOMOptions:y,dataURLOptions:b,inlineImages:w,recordCanvas:k,preserveWhiteSpace:R,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:M,keepIframeSrcFn:O});n&&x(e,n)}}),M),L}function Ae(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(Se||(Se={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(we||(we={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(Ce||(Ce={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(ke||(ke={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(Ie||(Ie={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(xe||(xe={}));var Fe="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",Pe={map:{},getId:function(){return console.error(Fe),-1},getNode:function(){return console.error(Fe),null},removeNodeFromMap:function(){console.error(Fe)},has:function(){return console.error(Fe),!1},reset:function(){console.error(Fe)}};function je(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(a){var i=Date.now();o||!1!==n.leading||(o=i);var s=t-(i-o),u=this,l=arguments;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=i,e.apply(u,l)):r||!1===n.trailing||(r=setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(u,l)}),s))}}function Ue(e,t,n,r,o){void 0===o&&(o=window);var a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return Ue(e,t,a||{},!0)}}function We(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}function ze(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ve(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Ge(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;if("string"==typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);n=e.classList.contains(t)}else e.classList.forEach((function(e){t.test(e)&&(n=!0)}));return n||Ge(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,Ge(e.parentNode,t)}function Be(e){return"__sn"in e&&e.__sn.id===pe}function He(e,t){if(ie(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||He(e.parentNode,t))}function qe(e){return Boolean(e.changedTouches)}function Xe(e){return"__sn"in e&&(e.__sn.type===K.Element&&"iframe"===e.__sn.tagName)}function Ke(e){return Boolean(null==e?void 0:e.shadowRoot)}function Ye(e){return"__ln"in e}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Pe=new Proxy(Pe,{get:function(e,t,n){return"map"===t&&console.error(Fe),Reflect.get(e,t,n)}}));var $e=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Ye(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Ye(e.nextSibling)&&e.nextSibling.__ln.previous){n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),Je=function(e,t){return"".concat(e,"@").concat(t)};function Ze(e){return"__sn"in e}var Qe=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,n,r,o;if(!e.frozen&&!e.locked){for(var a=[],i=new $e,s=function(t){for(var n=t,r=pe;r===pe;)r=(n=n&&n.nextSibling)&&e.mirror.getId(n);return r},u=function(t){for(var n,r,o,u,l,c=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,f=c;null===(o=null===(r=null==f?void 0:f.getRootNode)||void 0===r?void 0:r.call(f))||void 0===o?void 0:o.host;)f=(null===(l=null===(u=null==f?void 0:f.getRootNode)||void 0===u?void 0:u.call(f))||void 0===l?void 0:l.host)||null;var d=!(e.doc.contains(t)||null!==f&&e.doc.contains(f));if(t.parentNode&&!d){var p=ie(t.parentNode)?e.mirror.getId(c):e.mirror.getId(t.parentNode),h=s(t);if(-1===p||-1===h)return i.addNode(t);var v=De(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(n){Xe(n)&&e.iframeManager.addIframe(n),Ke(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n),e.shadowDomManager.observeAttachShadow(t)}});v&&a.push({parentId:p,nextId:h,node:v})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var l=re(e.movedSet),c=l.next();!c.done;c=l.next()){var f=c.value;tt(e.removes,f,e.mirror)&&!e.movedSet.has(f.parentNode)||u(f)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}try{for(var d=re(e.addedSet),p=d.next();!p.done;p=d.next()){f=p.value;nt(e.droppedSet,f)||tt(e.removes,f,e.mirror)?nt(e.movedSet,f)?u(f):e.droppedSet.add(f):u(f)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}for(var h=null;i.length;){var v=null;if(h){var m=e.mirror.getId(h.value.parentNode),y=s(h.value);-1!==m&&-1!==y&&(v=h)}if(!v)for(var g=i.length-1;g>=0;g--){var b=i.get(g);if(b){m=e.mirror.getId(b.value.parentNode),y=s(b.value);if(-1!==m&&-1!==y){v=b;break}}}if(!v){for(;i.head;)i.removeNode(i.head.value);break}h=v.previous,i.removeNode(v.value),u(v.value)}var S={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:a};(S.texts.length||S.attributes.length||S.removes.length||S.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(S))}},this.processMutation=function(t){var n,r,o,a;if(!Be(t.target))switch(t.type){case"characterData":var i=t.target.textContent;Ge(t.target,e.blockClass)||i===t.oldValue||e.texts.push({value:Re(t.target,e.maskTextClass,e.maskTextSelector)&&i?e.maskTextFn?e.maskTextFn(i):i.replace(/[\S]/g,"*"):i,node:t.target});break;case"attributes":var s=t.target;i=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(i=se({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:i,maskInputFn:e.maskInputFn})),Ge(t.target,e.blockClass)||i===t.oldValue)return;var u=e.attributes.find((function(e){return e.node===t.target}));if(u||(u={node:t.target,attributes:{}},e.attributes.push(u)),"style"===t.attributeName){var l=e.doc.createElement("span");t.oldValue&&l.setAttribute("style",t.oldValue),void 0!==u.attributes.style&&null!==u.attributes.style||(u.attributes.style={});var c=u.attributes.style;try{for(var f=re(Array.from(s.style)),d=f.next();!d.done;d=f.next()){var p=d.value,h=s.style.getPropertyValue(p),v=s.style.getPropertyPriority(p);h===l.style.getPropertyValue(p)&&v===l.style.getPropertyPriority(p)||(c[p]=""===v?h:[h,v])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}try{for(var m=re(Array.from(l.style)),y=m.next();!y.done;y=m.next()){p=y.value;""===s.style.getPropertyValue(p)&&(c[p]=!1)}}catch(e){o={error:e}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}}else u.attributes[t.attributeName]=_e(e.doc,t.target.tagName,t.attributeName,i);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var r=e.mirror.getId(n),o=ie(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);Ge(t.target,e.blockClass)||Be(n)||(e.addedSet.has(n)?(et(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===r||He(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[Je(r,o)]?et(e.movedSet,n):e.removes.push({parentId:o,id:r,isShadow:!!ie(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!n||!Ge(n,e.blockClass)){if(Ze(t)){if(Be(t))return;e.movedSet.add(t);var r=null;n&&Ze(n)&&(r=n.__sn.id),r&&(e.movedMap[Je(t.__sn.id,r)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);Ge(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){t[n]=e[n]}))},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();function et(e,t){e.delete(t),t.childNodes.forEach((function(t){return et(e,t)}))}function tt(e,t,n){var r=t.parentNode;if(!r)return!1;var o=n.getId(r);return!!e.some((function(e){return e.id===o}))||tt(e,r,n)}function nt(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||nt(e,n))}var rt=Qe,ot=[],at="undefined"!=typeof CSSGroupingRule,it="undefined"!=typeof CSSMediaRule,st="undefined"!=typeof CSSSupportsRule,ut="undefined"!=typeof CSSConditionRule;function lt(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function ct(e,t){var n,r,o=new rt;ot.push(o),o.init(e);var a=window.MutationObserver||window.__rrMutationObserver,i=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");i&&window[i]&&(a=window[i]);var s=new a(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function ft(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,o=e.blockClass,a=e.sampling;if(!1===a.mouseInteraction)return function(){};var i=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,s=[];return Object.keys(Ce).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e]})).forEach((function(e){var a=e.toLowerCase(),i=function(e){return function(n){var a=lt(n);if(!Ge(a,o)){var i=qe(n)?n.changedTouches[0]:n;if(i){var s=r.getId(a),u=i.clientX,l=i.clientY;t({type:Ce[e],id:s,x:u,y:l})}}}}(e);s.push(Ae(a,i,n))})),function(){s.forEach((function(e){return e()}))}}function dt(e){var t=e.scrollCb,n=e.doc,r=e.mirror,o=e.blockClass;return Ae("scroll",je((function(e){var a=lt(e);if(a&&!Ge(a,o)){var i=r.getId(a);if(a===n){var s=n.scrollingElement||n.documentElement;t({id:i,x:s.scrollLeft,y:s.scrollTop})}else t({id:i,x:a.scrollLeft,y:a.scrollTop})}}),e.sampling.scroll||100),n)}function pt(e,t){var n=ne({},e);return t||delete n.userTriggered,n}var ht=["INPUT","TEXTAREA","SELECT"],vt=new WeakMap;function mt(e){return function(e,t){if(at&&e.parentRule instanceof CSSGroupingRule||it&&e.parentRule instanceof CSSMediaRule||st&&e.parentRule instanceof CSSSupportsRule||ut&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else{n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function yt(e,t){var n,r;void 0===t&&(t={});var o=e.doc.defaultView;if(!o)return function(){};!function(e,t){var n=e.mutationCb,r=e.mousemoveCb,o=e.mouseInteractionCb,a=e.scrollCb,i=e.viewportResizeCb,s=e.inputCb,u=e.mediaInteractionCb,l=e.styleSheetRuleCb,c=e.styleDeclarationCb,f=e.canvasMutationCb,d=e.fontCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,ae([],oe(e),!1)),n.apply(void 0,ae([],oe(e),!1))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,ae([],oe(e),!1)),r.apply(void 0,ae([],oe(e),!1))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,ae([],oe(e),!1)),o.apply(void 0,ae([],oe(e),!1))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,ae([],oe(e),!1)),a.apply(void 0,ae([],oe(e),!1))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,ae([],oe(e),!1)),i.apply(void 0,ae([],oe(e),!1))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,ae([],oe(e),!1)),s.apply(void 0,ae([],oe(e),!1))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,ae([],oe(e),!1)),u.apply(void 0,ae([],oe(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,ae([],oe(e),!1)),l.apply(void 0,ae([],oe(e),!1))},e.styleDeclarationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleDeclaration&&t.styleDeclaration.apply(t,ae([],oe(e),!1)),c.apply(void 0,ae([],oe(e),!1))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,ae([],oe(e),!1)),f.apply(void 0,ae([],oe(e),!1))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,ae([],oe(e),!1)),d.apply(void 0,ae([],oe(e),!1))}}(e,t);var a=ct(e,e.doc),i=function(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,o=e.mirror;if(!1===n.mousemove)return function(){};var a,i="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,u=[],l=je((function(e){var n=Date.now()-a;t(u.map((function(e){return e.timeOffset-=n,e})),e),u=[],a=null}),s),c=je((function(e){var t=lt(e),n=qe(e)?e.changedTouches[0]:e,r=n.clientX,i=n.clientY;a||(a=Date.now()),u.push({x:r,y:i,id:o.getId(t),timeOffset:Date.now()-a}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?we.Drag:e instanceof MouseEvent?we.MouseMove:we.TouchMove)}),i,{trailing:!1}),f=[Ae("mousemove",c,r),Ae("touchmove",c,r),Ae("drag",c,r)];return function(){f.forEach((function(e){return e()}))}}(e),s=ft(e),u=dt(e),l=function(e){var t=e.viewportResizeCb,n=-1,r=-1;return Ae("resize",je((function(){var e=ze(),o=Ve();n===e&&r===o||(t({width:Number(o),height:Number(e)}),n=e,r=o)}),200),window)}(e),c=function(e){var t=e.inputCb,n=e.doc,r=e.mirror,o=e.blockClass,a=e.ignoreClass,i=e.maskInputOptions,s=e.maskInputFn,u=e.sampling,l=e.userTriggeredOnInput;function c(e){var t=lt(e),r=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(ht.indexOf(t.tagName)<0)&&!Ge(t,o)){var u=t.type;if(!t.classList.contains(a)){var c=t.value,d=!1;"radio"===u||"checkbox"===u?d=t.checked:(i[t.tagName.toLowerCase()]||i[u])&&(c=se({maskInputOptions:i,tagName:t.tagName,type:u,value:c,maskInputFn:s})),f(t,pt({text:c,isChecked:d,userTriggered:r},l));var p=t.name;"radio"===u&&p&&d&&n.querySelectorAll('input[type="radio"][name="'.concat(p,'"]')).forEach((function(e){e!==t&&f(e,pt({text:e.value,isChecked:!d,userTriggered:!1},l))}))}}}function f(e,n){var o=vt.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){vt.set(e,n);var a=r.getId(e);t(ne(ne({},n),{id:a}))}}var d=("last"===u.input?["change"]:["input","change"]).map((function(e){return Ae(e,c,n)})),p=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),h=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return p&&p.set&&d.push.apply(d,ae([],oe(h.map((function(e){return Ue(e[0],e[1],{set:function(){c({target:this})}})}))),!1)),function(){d.forEach((function(e){return e()}))}}(e),f=function(e){var t=e.mediaInteractionCb,n=e.blockClass,r=e.mirror,o=e.sampling,a=function(e){return je((function(o){var a=lt(o);if(a&&!Ge(a,n)){var i=a,s=i.currentTime,u=i.volume,l=i.muted;t({type:e,id:r.getId(a),currentTime:s,volume:u,muted:l})}}),o.media||500)},i=[Ae("play",a(0)),Ae("pause",a(1)),Ae("seeked",a(2)),Ae("volumechange",a(3))];return function(){i.forEach((function(e){return e()}))}}(e),d=function(e,t){var n=e.styleSheetRuleCb,r=e.mirror,o=t.win,a=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=function(e,t){var o=r.getId(this.ownerNode);return-1!==o&&n({id:o,adds:[{rule:e,index:t}]}),a.apply(this,arguments)};var i=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=function(e){var t=r.getId(this.ownerNode);return-1!==t&&n({id:t,removes:[{index:e}]}),i.apply(this,arguments)};var s={};at?s.CSSGroupingRule=o.CSSGroupingRule:(it&&(s.CSSMediaRule=o.CSSMediaRule),ut&&(s.CSSConditionRule=o.CSSConditionRule),st&&(s.CSSSupportsRule=o.CSSSupportsRule));var u={};return Object.entries(s).forEach((function(e){var t=oe(e,2),o=t[0],a=t[1];u[o]={insertRule:a.prototype.insertRule,deleteRule:a.prototype.deleteRule},a.prototype.insertRule=function(e,t){var a=r.getId(this.parentStyleSheet.ownerNode);return-1!==a&&n({id:a,adds:[{rule:e,index:ae(ae([],oe(mt(this)),!1),[t||0],!1)}]}),u[o].insertRule.apply(this,arguments)},a.prototype.deleteRule=function(e){var t=r.getId(this.parentStyleSheet.ownerNode);return-1!==t&&n({id:t,removes:[{index:ae(ae([],oe(mt(this)),!1),[e],!1)}]}),u[o].deleteRule.apply(this,arguments)}})),function(){o.CSSStyleSheet.prototype.insertRule=a,o.CSSStyleSheet.prototype.deleteRule=i,Object.entries(s).forEach((function(e){var t=oe(e,2),n=t[0],r=t[1];r.prototype.insertRule=u[n].insertRule,r.prototype.deleteRule=u[n].deleteRule}))}}(e,{win:o}),p=function(e,t){var n=e.styleDeclarationCb,r=e.mirror,o=t.win,a=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(e,t,o){var i,s,u=r.getId(null===(s=null===(i=this.parentRule)||void 0===i?void 0:i.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==u&&n({id:u,set:{property:e,value:t,priority:o},index:mt(this.parentRule)}),a.apply(this,arguments)};var i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,o,a=r.getId(null===(o=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==a&&n({id:a,remove:{property:e},index:mt(this.parentRule)}),i.apply(this,arguments)},function(){o.CSSStyleDeclaration.prototype.setProperty=a,o.CSSStyleDeclaration.prototype.removeProperty=i}}(e,{win:o}),h=e.collectFonts?function(e){var t=e.fontCb,n=e.doc,r=n.defaultView;if(!r)return function(){};var o=[],a=new WeakMap,i=r.FontFace;r.FontFace=function(e,t,n){var r=new i(e,t,n);return a.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var s=We(n.fonts,"add",(function(e){return function(n){return setTimeout((function(){var e=a.get(n);e&&(t(e),a.delete(n))}),0),e.apply(this,[n])}}));return o.push((function(){r.FontFace=i})),o.push(s),function(){o.forEach((function(e){return e()}))}}(e):function(){},v=[];try{for(var m=re(e.plugins),y=m.next();!y.done;y=m.next()){var g=y.value;v.push(g.observer(g.callback,o,g.options))}}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}return function(){ot.forEach((function(e){return e.reset()})),a.disconnect(),i(),s(),u(),l(),c(),f(),d(),p(),h(),v.forEach((function(e){return e()}))}}var gt=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e)},e}(),bt=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(We(HTMLElement.prototype,"attachShadow",(function(e){return function(){var n=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}return e.prototype.addShadowRoot=function(e,t){ct(ne(ne({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),dt(ne(ne({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(We(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(){var r=n.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),r}})))}},e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))},e}();for(var St="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ct=0;Ct<64;Ct++)wt[St.charCodeAt(Ct)]=Ct;var kt=new Map;var It=function(t,n,r){if(t&&(Mt(t,n)||"object"===e(t))){var o=function(e,t){var n=kt.get(e);return n||(n=new Map,kt.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(r,t.constructor.name),a=o.indexOf(t);return-1===a&&(a=o.length,o.push(t)),a}};function xt(t,n,r){if(t instanceof Array)return t.map((function(e){return xt(e,n,r)}));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){var o=t.constructor.name,a=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=St[n[t]>>2],o+=St[(3&n[t])<<4|n[t+1]>>4],o+=St[(15&n[t+1])<<2|n[t+2]>>6],o+=St[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(t);return{rr_type:o,base64:a}}return t instanceof DataView?{rr_type:t.constructor.name,args:[xt(t.buffer,n,r),t.byteOffset,t.byteLength]}:t instanceof HTMLImageElement?{rr_type:t.constructor.name,src:t.src}:t instanceof ImageData?{rr_type:t.constructor.name,args:[xt(t.data,n,r),t.width,t.height]}:Mt(t,n)||"object"===e(t)?{rr_type:t.constructor.name,index:It(t,n,r)}:t}var Tt=function(e,t,n){return ae([],oe(e),!1).map((function(e){return xt(e,t,n)}))},Mt=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"==typeof t[e]}));return Boolean(n.find((function(n){return e instanceof t[n]})))};function Et(e,t,n,r,o,a){var i,s,u=[],l=Object.getOwnPropertyNames(e),c=function(i){try{if("function"!=typeof e[i])return"continue";var s=We(e,i,(function(s){return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=s.apply(this,u);if(It(c,a,e),!Ge(this.canvas,r)){o.getId(this.canvas);var f=Tt(ae([],oe(u),!1),a,e),d={type:t,property:i,args:f};n(this.canvas,d)}return c}}));u.push(s)}catch(r){var l=Ue(e,i,{set:function(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});u.push(l)}};try{for(var f=re(l),d=f.next();!d.done;d=f.next()){c(d.value)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}return u}var Ot,_t,Rt=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=function(e,t){var n=[];try{var r=We(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Ge(this,t)||"__context"in this||(this.__context=n),e.apply(this,ae([n],oe(r),!1))}}));n.push(r)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(e){return e()}))}}(e,t),r=function(e,t,n,r){var o,a,i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),u=function(r){try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[r])return"continue";var o=We(t.CanvasRenderingContext2D.prototype,r,(function(t){return function(){for(var o=this,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return Ge(this.canvas,n)||setTimeout((function(){var t=ae([],oe(a),!1);if("drawImage"===r&&t[0]&&t[0]instanceof HTMLCanvasElement){var n=t[0],i=n.getContext("2d"),s=null==i?void 0:i.getImageData(0,0,n.width,n.height),u=null==s?void 0:s.data;t[0]=JSON.stringify(u)}e(o.canvas,{type:ke["2D"],property:r,args:t})}),0),t.apply(this,a)}}));i.push(o)}catch(n){var a=Ue(t.CanvasRenderingContext2D.prototype,r,{set:function(t){e(this.canvas,{type:ke["2D"],property:r,args:[t],setter:!0})}});i.push(a)}};try{for(var l=re(s),c=l.next();!c.done;c=l.next())u(c.value)}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return function(){i.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror),o=function(e,t,n,r){var o=[];return o.push.apply(o,ae([],oe(Et(t.WebGLRenderingContext.prototype,ke.WebGL,e,n,r,t)),!1)),void 0!==t.WebGL2RenderingContext&&o.push.apply(o,ae([],oe(Et(t.WebGL2RenderingContext.prototype,ke.WebGL2,e,n,r,t)),!1)),function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){n(),r(),o()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.startRAFTimestamping=function(){var e=this;requestAnimationFrame((function t(n){e.rafStamps.latestId=n,requestAnimationFrame(t)}))},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){var r=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,r)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map((function(e){e.type;var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),o=n[0].type;this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}},e}();function Nt(e){return ne(ne({},e),{timestamp:Date.now()})}var Lt={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function Dt(e){void 0===e&&(e={});var t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,o=e.blockClass,a=void 0===o?"rr-block":o,i=e.blockSelector,s=void 0===i?null:i,u=e.ignoreClass,l=void 0===u?"rr-ignore":u,c=e.maskTextClass,f=void 0===c?"rr-mask":c,d=e.maskTextSelector,p=void 0===d?null:d,h=e.inlineStylesheet,v=void 0===h||h,m=e.maskAllInputs,y=e.maskInputOptions,g=e.slimDOMOptions,b=e.maskInputFn,S=e.maskTextFn,w=e.hooks,C=e.packFn,k=e.sampling,I=void 0===k?{}:k,x=e.mousemoveWait,T=e.recordCanvas,M=void 0!==T&&T,E=e.userTriggeredOnInput,O=void 0!==E&&E,_=e.collectFonts,R=void 0!==_&&_,N=e.inlineImages,L=void 0!==N&&N,D=e.plugins,A=e.keepIframeSrcFn,F=void 0===A?function(){return!1}:A;if(!t)throw new Error("emit function is required");void 0!==x&&void 0===I.mousemove&&(I.mousemove=x);var P,j,U=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==y?y:{password:!0},W=!0===g||"all"===g?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===g,headMetaDescKeywords:"all"===g}:g||{};void 0===P&&(P=window),"NodeList"in P&&!P.NodeList.prototype.forEach&&(P.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in P&&!P.DOMTokenList.prototype.forEach&&(P.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var z=0;Ot=function(e,o){var a;if(!(null===(a=ot[0])||void 0===a?void 0:a.isFrozen())||e.type===Se.FullSnapshot||e.type===Se.IncrementalSnapshot&&e.data.source===we.Mutation||ot.forEach((function(e){return e.unfreeze()})),t(function(e){var t,n;try{for(var r=re(D||[]),o=r.next();!o.done;o=r.next()){var a=o.value;a.eventProcessor&&(e=a.eventProcessor(e))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return C&&(e=C(e)),e}(e),o),e.type===Se.FullSnapshot)j=e,z=0;else if(e.type===Se.IncrementalSnapshot){if(e.data.source===we.Mutation&&e.data.isAttachIframe)return;z++;var i=r&&z>=r,s=n&&e.timestamp-j.timestamp>n;(i||s)&&_t(!0)}};var V=function(e){Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.Mutation},e)}))},G=function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.Scroll},e)}))},B=function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.CanvasMutation},e)}))},H=new gt({mutationCb:V}),q=new Rt({recordCanvas:M,mutationCb:B,win:window,blockClass:a,mirror:Lt}),X=new bt({mutationCb:V,scrollCb:G,bypassOptions:{blockClass:a,blockSelector:s,maskTextClass:f,maskTextSelector:p,inlineStylesheet:v,maskInputOptions:U,maskTextFn:S,maskInputFn:b,recordCanvas:M,inlineImages:L,sampling:I,slimDOMOptions:W,iframeManager:H,canvasManager:q},mirror:Lt});_t=function(e){var t,n,r,o;void 0===e&&(e=!1),Ot(Nt({type:Se.Meta,data:{href:window.location.href,width:Ve(),height:ze()}}),e),ot.forEach((function(e){return e.lock()}));var i=oe(function(e,t){var n=t||{},r=n.blockClass,o=void 0===r?"rr-block":r,a=n.blockSelector,i=void 0===a?null:a,s=n.maskTextClass,u=void 0===s?"rr-mask":s,l=n.maskTextSelector,c=void 0===l?null:l,f=n.inlineStylesheet,d=void 0===f||f,p=n.inlineImages,h=void 0!==p&&p,v=n.recordCanvas,m=void 0!==v&&v,y=n.maskAllInputs,g=void 0!==y&&y,b=n.maskTextFn,S=n.maskInputFn,w=n.slimDOM,C=void 0!==w&&w,k=n.dataURLOptions,I=n.preserveWhiteSpace,x=n.onSerialize,T=n.onIframeLoad,M=n.iframeLoadTimeout,E=n.keepIframeSrcFn,O={};return[De(e,{doc:e,map:O,blockClass:o,blockSelector:i,maskTextClass:u,maskTextSelector:c,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===g?{password:!0}:g,maskTextFn:b,maskInputFn:S,slimDOMOptions:!0===C||"all"===C?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===C,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===C?{}:C,dataURLOptions:k,inlineImages:h,recordCanvas:m,preserveWhiteSpace:I,onSerialize:x,onIframeLoad:T,iframeLoadTimeout:M,keepIframeSrcFn:void 0===E?function(){return!1}:E}),O]}(document,{blockClass:a,blockSelector:s,maskTextClass:f,maskTextSelector:p,inlineStylesheet:v,maskAllInputs:U,maskTextFn:S,slimDOM:W,recordCanvas:M,inlineImages:L,onSerialize:function(e){Xe(e)&&H.addIframe(e),Ke(e)&&X.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){H.attachIframe(e,t),X.observeAttachShadow(e)},keepIframeSrcFn:F}),2),u=i[0],l=i[1];if(!u)return console.warn("Failed to snapshot the document");Lt.map=l,Ot(Nt({type:Se.FullSnapshot,data:{node:u,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(o=null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),ot.forEach((function(e){return e.unlock()}))};try{var K=[];K.push(Ae("DOMContentLoaded",(function(){Ot(Nt({type:Se.DomContentLoaded,data:{}}))})));var Y=function(e){var t;return yt({mutationCb:V,mousemoveCb:function(e,t){return Ot(Nt({type:Se.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.MouseInteraction},e)}))},scrollCb:G,viewportResizeCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.ViewportResize},e)}))},inputCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.Input},e)}))},mediaInteractionCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.StyleDeclaration},e)}))},canvasMutationCb:B,fontCb:function(e){return Ot(Nt({type:Se.IncrementalSnapshot,data:ne({source:we.Font},e)}))},blockClass:a,ignoreClass:l,maskTextClass:f,maskTextSelector:p,maskInputOptions:U,inlineStylesheet:v,sampling:I,recordCanvas:M,inlineImages:L,userTriggeredOnInput:O,collectFonts:R,doc:e,maskInputFn:b,maskTextFn:S,blockSelector:s,slimDOMOptions:W,mirror:Lt,iframeManager:H,shadowDomManager:X,canvasManager:q,plugins:(null===(t=null==D?void 0:D.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return Ot(Nt({type:Se.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},w)};H.addLoadListener((function(e){K.push(Y(e.contentDocument))}));var $=function(){_t(),K.push(Y(document))};return"interactive"===document.readyState||"complete"===document.readyState?$():K.push(Ae("load",(function(){Ot(Nt({type:Se.Load,data:{}})),$()}),window)),function(){K.forEach((function(e){return e()}))}}catch(e){console.warn(e)}}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ft(r.key),r)}}function jt(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Dt.addCustomEvent=function(e,t){if(!Ot)throw new Error("please add custom event after start recording");Ot(Nt({type:Se.Custom,data:{tag:e,payload:t}}))},Dt.freezePage=function(){ot.forEach((function(e){return e.freeze()}))},Dt.takeFullSnapshot=function(e){if(!_t)throw new Error("please take full snapshot after start recording");_t(e)},Dt.mirror=Lt;var zt=Uint8Array,Vt=Uint16Array,Gt=Int32Array,Bt=new zt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ht=new zt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qt=new zt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xt=function(e,t){for(var n=new Vt(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new Gt(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return{b:n,r:o}},Kt=Xt(Bt,2),Yt=Kt.b,$t=Kt.r;Yt[28]=258,$t[258]=28;for(var Jt=Xt(Ht,0).r,Zt=new Vt(32768),Qt=0;Qt<32768;++Qt){var en=(43690&Qt)>>1|(21845&Qt)<<1;en=(61680&(en=(52428&en)>>2|(13107&en)<<2))>>4|(3855&en)<<4,Zt[Qt]=((65280&en)>>8|(255&en)<<8)>>1}var tn=function(e,t,n){for(var r=e.length,o=0,a=new Vt(t);o<r;++o)e[o]&&++a[e[o]-1];var i,s=new Vt(t);for(o=1;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){i=new Vt(1<<t);var u=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],c=t-e[o],f=s[e[o]-1]++<<c,d=f|(1<<c)-1;f<=d;++f)i[Zt[f]>>u]=l}else for(i=new Vt(r),o=0;o<r;++o)e[o]&&(i[o]=Zt[s[e[o]-1]++]>>15-e[o]);return i},nn=new zt(288);for(Qt=0;Qt<144;++Qt)nn[Qt]=8;for(Qt=144;Qt<256;++Qt)nn[Qt]=9;for(Qt=256;Qt<280;++Qt)nn[Qt]=7;for(Qt=280;Qt<288;++Qt)nn[Qt]=8;var rn=new zt(32);for(Qt=0;Qt<32;++Qt)rn[Qt]=5;var on=tn(nn,9,0),an=tn(rn,5,0),sn=function(e){return(e+7)/8|0},un=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new zt(e.subarray(t,n))},ln=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},cn=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},fn=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,a=n.slice();if(!o)return{t:gn,l:0};if(1==o){var i=new zt(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],l=0,c=1,f=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};c!=o-1;)s=n[n[l].f<n[f].f?l++:f++],u=n[l!=c&&n[l].f<n[f].f?l++:f++],n[c++]={s:-1,f:s.f+u.f,l:s,r:u};var d=a[0].s;for(r=1;r<o;++r)a[r].s>d&&(d=a[r].s);var p=new Vt(d+1),h=dn(n[c-1],p,0);if(h>t){r=0;var v=0,m=h-t,y=1<<m;for(a.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<o;++r){var g=a[r].s;if(!(p[g]>t))break;v+=y-(1<<h-p[g]),p[g]=t}for(v>>=m;v>0;){var b=a[r].s;p[b]<t?v-=1<<t-p[b]++-1:++r}for(;r>=0&&v;--r){var S=a[r].s;p[S]==t&&(--p[S],++v)}h=t}return{t:new zt(p),l:h}},dn=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},pn=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Vt(++t),r=0,o=e[0],a=1,i=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(o),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(o);a=1,o=e[s]}return{c:n.subarray(0,r),n:t}},hn=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},vn=function(e,t,n){var r=n.length,o=sn(t+2);e[o]=255&r,e[o+1]=r>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<r;++a)e[o+a+4]=n[a];return 8*(o+4+r)},mn=function(e,t,n,r,o,a,i,s,u,l,c){ln(t,c++,n),++o[256];for(var f=fn(o,15),d=f.t,p=f.l,h=fn(a,15),v=h.t,m=h.l,y=pn(d),g=y.c,b=y.n,S=pn(v),w=S.c,C=S.n,k=new Vt(19),I=0;I<g.length;++I)++k[31&g[I]];for(I=0;I<w.length;++I)++k[31&w[I]];for(var x=fn(k,7),T=x.t,M=x.l,E=19;E>4&&!T[qt[E-1]];--E);var O,_,R,N,L=l+5<<3,D=hn(o,nn)+hn(a,rn)+i,A=hn(o,d)+hn(a,v)+i+14+3*E+hn(k,T)+2*k[16]+3*k[17]+7*k[18];if(u>=0&&L<=D&&L<=A)return vn(t,c,e.subarray(u,u+l));if(ln(t,c,1+(A<D)),c+=2,A<D){O=tn(d,p,0),_=d,R=tn(v,m,0),N=v;var F=tn(T,M,0);ln(t,c,b-257),ln(t,c+5,C-1),ln(t,c+10,E-4),c+=14;for(I=0;I<E;++I)ln(t,c+3*I,T[qt[I]]);c+=3*E;for(var P=[g,w],j=0;j<2;++j){var U=P[j];for(I=0;I<U.length;++I){var W=31&U[I];ln(t,c,F[W]),c+=T[W],W>15&&(ln(t,c,U[I]>>5&127),c+=U[I]>>12)}}}else O=on,_=nn,R=an,N=rn;for(I=0;I<s;++I){var z=r[I];if(z>255){cn(t,c,O[(W=z>>18&31)+257]),c+=_[W+257],W>7&&(ln(t,c,z>>23&31),c+=Bt[W]);var V=31&z;cn(t,c,R[V]),c+=N[V],V>3&&(cn(t,c,z>>5&8191),c+=Ht[V])}else cn(t,c,O[z]),c+=_[z]}return cn(t,c,O[256]),c+_[256]},yn=new Gt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gn=new zt(0),bn=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),Sn=function(e,t,n,r,o){if(!o&&(o={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),i=new zt(a.length+e.length);i.set(a),i.set(e,a.length),e=i,o.w=a.length}return function(e,t,n,r,o,a){var i=a.z||e.length,s=new zt(r+i+5*(1+Math.ceil(i/7e3))+o),u=s.subarray(r,s.length-o),l=a.l,c=7&(a.r||0);if(t){c&&(u[0]=a.r>>3);for(var f=yn[t-1],d=f>>13,p=8191&f,h=(1<<n)-1,v=a.p||new Vt(32768),m=a.h||new Vt(h+1),y=Math.ceil(n/3),g=2*y,b=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<g)&h},S=new Gt(25e3),w=new Vt(288),C=new Vt(32),k=0,I=0,x=a.i||0,T=0,M=a.w||0,E=0;x+2<i;++x){var O=b(x),_=32767&x,R=m[O];if(v[_]=R,m[O]=_,M<=x){var N=i-x;if((k>7e3||T>24576)&&(N>423||!l)){c=mn(e,u,0,S,w,C,I,T,E,x-E,c),T=k=I=0,E=x;for(var L=0;L<286;++L)w[L]=0;for(L=0;L<30;++L)C[L]=0}var D=2,A=0,F=p,P=_-R&32767;if(N>2&&O==b(x-P))for(var j=Math.min(d,N)-1,U=Math.min(32767,x),W=Math.min(258,N);P<=U&&--F&&_!=R;){if(e[x+D]==e[x+D-P]){for(var z=0;z<W&&e[x+z]==e[x+z-P];++z);if(z>D){if(D=z,A=P,z>j)break;var V=Math.min(P,z-2),G=0;for(L=0;L<V;++L){var B=x-P+L&32767,H=B-v[B]&32767;H>G&&(G=H,R=B)}}}P+=(_=R)-(R=v[_])&32767}if(A){S[T++]=268435456|$t[D]<<18|Jt[A];var q=31&$t[D],X=31&Jt[A];I+=Bt[q]+Ht[X],++w[257+q],++C[X],M=x+D,++k}else S[T++]=e[x],++w[e[x]]}}for(x=Math.max(x,M);x<i;++x)S[T++]=e[x],++w[e[x]];c=mn(e,u,l,S,w,C,I,T,E,x-E,c),l||(a.r=7&c|u[c/8|0]<<3,c-=7,a.h=m,a.p=v,a.i=x,a.w=M)}else{for(x=a.w||0;x<i+l;x+=65535){var K=x+65535;K>=i&&(u[c/8|0]=l,K=i),c=vn(u,c+1,e.subarray(x,K))}a.i=i}return un(s,0,r+sn(c)+o)}(e,null==t.level?6:t.level,null==t.mem?o.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,o)},wn=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Cn(e,t){t||(t={});var n=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=bn[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}}(),r=e.length;n.p(e);var o,a=Sn(e,t,10+((o=t).filename?o.filename.length+1:0),8),i=a.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&wn(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(a,t),wn(a,i-8,n.d()),wn(a,i-4,r),a}var kn="undefined"!=typeof TextEncoder&&new TextEncoder,In="undefined"!=typeof TextDecoder&&new TextDecoder;try{In.decode(gn,{stream:!0}),1}catch(e){}var xn="0.19.0",Tn={"Content-Type":"application/json","Content-Encoding":"gzip"};function Mn(e){return Array.isArray(e)}function En(t){return function(t){return!!t&&"object"===e(t)&&!Mn(t)}(t)?{kvlistValue:{values:Object.entries(t).map((function(e){var t=Wt(e,2);return{key:t[0],value:En(t[1])}}))}}:Mn(t)?{arrayValue:{values:t.map((function(e){return En(e)}))}}:"string"==typeof t?{stringValue:t}:"number"==typeof t?{doubleValue:t}:"boolean"==typeof t?{boolValue:t}:{}}var On=function(){return jt((function e(t){At(this,e),this.config=t}),[{key:"constructLogData",value:function(e){return{resourceLogs:[{resource:{attributes:En(this.config.getResourceAttributes()||{}).kvlistValue.values},scopeLogs:[{scope:{name:"splunk.rr-web",version:xn},logRecords:e.map((function(e){return{body:En(e.body),timeUnixNano:e.timeUnixNano,attributes:En(e.attributes||{}).kvlistValue.values}}))}]}]}}},{key:"export",value:function(e){if(0!==e.length){var t=this.config.headers?Object.assign({},Tn,this.config.headers):Tn,n=this.constructLogData(e);this.config.debug&&console.log("otlp request",n);var r=Cn(function(e,t){if(t){for(var n=new zt(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(kn)return kn.encode(e);var o=e.length,a=new zt(e.length+(e.length>>1)),i=0,s=function(e){a[i++]=e};for(r=0;r<o;++r){if(i+5>a.length){var u=new zt(i+8+(o-r<<1));u.set(a),a=u}var l=e.charCodeAt(r);l<128||t?s(l):l<2048?(s(192|l>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++r))>>18),s(128|l>>12&63),s(128|l>>6&63),s(128|63&l)):(s(224|l>>12),s(128|l>>6&63),s(128|63&l))}return un(a,0,i)}(JSON.stringify(n)));fetch(this.config.beaconUrl,{method:"POST",body:r,headers:t}).catch((function(){}))}}}])}(),_n=b("OpenTelemetry SDK Context Key SUPPRESS_TRACING");var Rn=function(){return jt((function e(t,n){var r=this;At(this,e),this.logs=[],this.scheduledDelayMillis=(null==n?void 0:n.scheduledDelayMillis)||5e3,this.exporter=t,window.addEventListener("unload",(function(){r._flushAll()}))}),[{key:"onLog",value:function(e){var t=this;this.logs.push(e),void 0===this.timeout&&(this.timeout=setTimeout((function(){t.timeout=void 0,t._flushAll()}),this.scheduledDelayMillis))}},{key:"_flushAll",value:function(){var e=this;this.lastBatchSent=Date.now(),Q.with(function(e){return e.setValue(_n,!0)}(Q.active()),(function(){var t=e.logs.splice(0,e.logs.length);e.exporter.export(t)}))}}])}();function Nn(e,t,n){return{body:e,timeUnixNano:t,attributes:n}}var Ln=Symbol.for("opentelemetry.js.api.1");function Dn(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}var An,Fn,Pn=972800,jn=new TextEncoder,Un=new TextDecoder,Wn=!1,zn=0,Vn=!1,Gn=1,Bn=1,Hn={get inited(){return Boolean(Wn)},init:function(e){if(!Wn)if("undefined"!=typeof window){var t=function(e){var t,n,r=null===(t=globalThis[Ln])||void 0===t?void 0:t["splunk.rum.version"];if(r&&r===xn)return null===(n=globalThis[Ln])||void 0===n?void 0:n[e];console.warn("SplunkSessionRecorder: Version mismatch with SplunkRum (RUM: ".concat(r,", recorder: ").concat(xn,")"))}("splunk.rum"),n=te.getTracerProvider();if(n&&"getDelegate"in n&&(n=n.getDelegate()),t&&t.resource){var r=t.resource;!function(e){Dn(e,"beaconUrl","beaconEndpoint"),Dn(e,"rumAuth","rumAccessToken")}(e);var o=e.apiToken,a=e.beaconEndpoint,i=e.debug,s=e.realm,u=e.rumAccessToken,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["apiToken","beaconEndpoint","debug","realm","rumAccessToken"]),c=(An=te.getTracer("splunk.rr-web",xn)).startSpan("record init");if(c.isRecording()){c.end();var f=a;if(s&&(f?console.warn("Splunk Session Recorder: Realm value ignored (beaconEndpoint has been specified)"):f="https://rum-ingest.".concat(s,".signalfx.com/v1/rumreplay")),f){var d={};o&&(d["X-SF-Token"]=o),u&&(f+="?auth=".concat(u));var p=new On({beaconUrl:f,debug:i,headers:d,getResourceAttributes:function(){return Object.assign(Object.assign({},r.attributes),{"splunk.rumSessionId":t.getSessionId()})}}),h=new Rn(p,{});Fn=t.getSessionId(),zn=Date.now(),Wn=Dt(Object.assign(Object.assign({maskAllInputs:!1,inlineImages:!0},l),{emit:function(e){if(!Vn){if(t.getSessionId()!==Fn){if(document.hidden)return;Fn=t.getSessionId(),zn=Date.now(),Gn=1,Bn=1,Dt.takeFullSnapshot()}if(!(e.timestamp>zn+1446e4))for(var n=e.timestamp,r=Gn++,o=jn.encode(JSON.stringify(e)),a=Math.ceil(o.byteLength/Pn),s=0;s<a;s++){var u=s*Pn,l=(s+1)*Pn,c=Nn(Un.decode(o.slice(u,l)),n,{"rr-web.offset":Bn++,"rr-web.event":r,"rr-web.chunk":s+1,"rr-web.total-chunks":a});i&&console.log(c),h.onLog(c)}}}}))}else console.error("Session recorder could not determine `exportUrl`, please ensure that `realm` or `beaconEndpoint` is specified and try again")}}else console.error("Splunk OTEL Web must be inited before session recorder.")}else console.error("Session recorder can't be ran in non-browser environments")},resume:function(){if(Wn){var e=Vn;Vn=!1,e||(Dt.takeFullSnapshot(),An.startSpan("record resume").end())}},stop:function(){Wn&&(Vn&&An.startSpan("record stop").end(),Vn=!0)},deinit:function(){Wn&&(Wn(),Wn=!1)}};return Hn}();
//# sourceMappingURL=splunk-otel-web-session-recorder.js.map
